<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from GModule.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS" />
	<title>GModuleについて</title>
	<meta name="author" content="Halo" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:halosuke@gmail.com" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id84" name="id84">GModuleオブジェクト</a>
</h1><div class="para"><div>
　KAG3で言うところのPluginクラスはGOKI2ではGModuleクラスが該当します。<br />
　GModuleを作成するにはまず、クラス名.tjsのファイルを作成します。<br />
　Sample.tjsを作成し内容を以下のようにします。<br />
　createExtensionTagHandlersメソッドを実装して辞書配列を返す事でタグを追加できます。<br />
<div class="tagexample"><code class="bq"><span class="weak">Sample.tjs</span><br />
class Sample extends GModule<br />
{<br />
　function Sample(container, name)<br />
　{<br />
　　super.GModule(container, name);<br />
　}<br />
<br />
　function createExtensionTagHandlers()<br />
　{<br />
　　return %[<br />
　　　/* @sample */<br />
　　　'sample' =&gt; function (elm, c) {<br />
　　　　// cは実行元のコンダクタが渡されます。<br />
　　　　System.inform("sampleタグを実行しました。");<br />
　　　} incontextof this,<br />
　　];<br />
　}<br />
}<br />
</code></div>
<br />
　Sample.tjsを作成後construct.gsファイルに以下の一行を追加します。<br />
<div class="tagexample"><code class="bq">
@load_module name=Sample<br />
</code></div>
<br />
　これでsampleタグを書く事ができるようになります。<br />
<br />
　TJSからモジュールにアクセスするにはwindow.modules.Sampleとします。<br />
<br />
<h1><a id="id84" name="id84">既存モジュールの継承</a>
</h1><div class="para"><div>
　既存モジュールは派生させて機能を追加する事ができます。<br />
　ここではModImageに自由に使えるレイヤ群を追加してみます。<br />
<div class="example2"><code class="bq"><span class="weak">ModImageEx.tjs</span><br />
/* 自前のイテレータクラスを作成します。 */<br />
class FreeLayerIterator extends GLayerIterator<br />
{<br />
　function FreeLayerIterator(window, container)<br />
　{<br />
　　super.GLayerIterator(...);<br />
<br />
　　// レイヤの基本のabsolute値を設定します。<br />
　　setAbsoluteBase(10000);<br />
　　// setAbsoluteBaseで設定した値+ここで設定した値*レイヤインデックスが最終的なレイヤのabsolute値になります。<br />
　　setAbsoluteStep(1000);<br />
　}<br />
<br />
　function create(window)<br />
　{<br />
　　// 自作のレイヤがあればそれを作成して返してもよいです。<br />
　　var obj = new GLayer(window, container.get(container.parentLayerName), onLayerEvent);<br />
<br />
　　return obj;<br />
　}<br />
<br />
　// ここで指定した文字列+レイヤインデックスがレイヤの名前になります。<br />
　// containerからレイヤを取り出す時はこの名前を利用します。<br />
　property prefix<br />
　{<br />
　　getter　　　{ return 'free_'; }<br />
　}<br />
}<br />
<br />
class ModImageEx extends ModImage<br />
{<br />
　var freeLayers;<br />
<br />
　function ModImageEx(container, name)<br />
　{<br />
　　super.ModImage(container, name);<br />
<br />
　　freeLayers = new FreeLayerIterator(window, layerContainer);<br />
　}<br />
<br />
　function createExtensionTagHandlers()<br />
　{<br />
　　return %[<br />
　　　/* @freelayeropt */<br />
　　　'freelayeropt' =&gt; function (elm, c) {<br />
　　　　// レイヤの数を変更します。<br />
　　　　freeLayers.count = +elm.count if elm.count !== void;<br />
　　　} incontextof this,<br />
<br />
　　　/* @freelayer */<br />
　　　'freelayer' =&gt; function (elm, c) {<br />
　　　　// レイヤに画像を読み込んで表示します。<br />
　　　　var layer = freeLayers.at(+elm.no);<br />
　　　　layer.loadImages(elm.storage, elm.key);<br/>
　　　　layer.visible = true;<br />
　　　} incontextof this,<br />
　　];<br />
　}<br />
<br />
　　function onAttach(name)<br />
　　{<br />
　　　// ここで派生元(ModImage)モジュールの別名を登録する事で<br />
　　　// ModImageを使っている他のモジュールに派生先(ModImageEx)モジュールを利用させる事ができます。<br />
　　　addAlias("ModImageEx", "ModImage");<br />
　　　addAlias("ModImageEx", "modImage");<br />
　　}<br />
}<br />
</code></div>
　既存のモジュールを継承せずに自由なモジュールを作成する事も可能です。<br />
　例えばオリジナルのセーブロード画面なども簡単に作る事ができます。<br />
</div></div>
<h1><a id="id84" name="id84">イベント</a>
</h1><div class="para"><div>
GOKI2のモジュールは様々なイベントを受け取る事ができます。<br />
例としてウインドウの左クリックイベントを受け取る場合Sampleクラスに以下を追加します。<br />
<div class="tagexample"><code class="bq"><span class="weak">Sample.tjs</span><br />
class Sample extends GModule<br />
{<br />
　function onWindowLeftClick(x, y, shift)<br />
　{<br />
　　// ウインドウ左クリックされたので何か処理を書く。<br />
　}<br />
}<br />
</code></div>
　イベントを追加するにはイベントを発生させたいタイミングで以下のようにします。<br />
　container.callHandler("onEvent", param1, param2, ...);<br />
<br />
<table class="taglist"><tbody>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onConductorCall">onConductorCall</a></span></td><td class="taglisteven">callタグ実行イベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onConductorJump">onConductorJump</a></span></td><td class="taglistodd">jumpタグ実行イベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onConductorReturn">onConductorReturn</a></span></td><td class="taglisteven">returnタグ実行イベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onConductorScenarioLoad">onConductorScenarioLoad</a></span></td><td class="taglistodd">シナリオのロードイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onConductorScenarioLoaded">onConductorScenarioLoaded</a></span></td><td class="taglisteven">シナリオのロード後イベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onConductorLabel">onConductorLabel</a></span></td><td class="taglistodd">ラベル通過イベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onSoundMasterVolumeChanged">onSoundMasterVolumeChanged</a></span></td><td class="taglisteven">サウンドのマスターボリューム変更イベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onWindowLeftClick">onWindowLeftClick</a></span></td><td class="taglistodd">ウインドウの左クリックイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onWindowRightClick">onWindowRightClick</a></span></td><td class="taglisteven">ウインドウの右クリックイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onWindowMiddleClick">onWindowMiddleClick</a></span></td><td class="taglistodd">ウインドウの中ボタンクリックイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onWindowMouseWheel">onWindowMouseWheel</a></span></td><td class="taglistodd">ウインドウのホイールイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onWindowKeyDown">onWindowKeyDown</a></span></td><td class="taglisteven">キーダウンイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onWindowKeyUp">onWindowKeyUp</a></span></td><td class="taglistodd">キーアップイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onWindowClose">onWindowClose</a></span></td><td class="taglisteven">ウインドウクローズイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onSaveStartAnchor">onSaveStartAnchor</a></span></td><td class="taglistodd">スタート位置の記録イベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onLoadStartAnchor">onLoadStartAnchor</a></span></td><td class="taglisteven">スタート位置へのロードイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onPushRecordAnchor">onPushRecordAnchor</a></span></td><td class="taglistodd">レコード位置の記録イベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onPopRecordAnchor">onPopRecordAnchor</a></span></td><td class="taglisteven">レコード位置の復帰イベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onRemoveStartAnchor">onRemoveStartAnchor</a></span></td><td class="taglistodd">スタート位置の削除イベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onSaveSystemVariables">onSaveSystemVariables</a></span></td><td class="taglisteven">システム変数のセーブ時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onLoadSystemVariables">onLoadSystemVariables</a></span></td><td class="taglistodd">システム変数のロード時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onSave">onSave</a></span></td><td class="taglisteven">セーブ時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onLoad">onLoad</a></span></td><td class="taglistodd">ロード時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onCopyBookmark">onCopyBookmark</a></span></td><td class="taglisteven">セーブデータのコピー時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onEraseBookmark">onEraseBookmark</a></span></td><td class="taglistodd">セーブデータの削除時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onShowMessageLayer">onShowMessageLayer</a></span></td><td class="taglisteven">メッセージレイヤが表示された時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onHideMessageLayer">onHideMessageLayer</a></span></td><td class="taglistodd">メッセージレイヤが消去された時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onHideMessageLayerByUser">onHideMessageLayerByUser</a></span></td><td class="taglisteven">メッセージレイヤが一時消去された時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onShowMessageLayerByUser">onShowMessageLayerByUser</a></span></td><td class="taglistodd">メッセージレイヤが一時消去から復帰した時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onSkipModeChanged">onSkipModeChanged</a></span></td><td class="taglisteven">スキップモードが変更された時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onCancelAutoMode">onCancelAutoMode</a></span></td><td class="taglistodd">オートモードが解除された時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onEnterAutoMode">onEnterAutoMode</a></span></td><td class="taglisteven">オートモードになった時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onShowHistoryLayer">onShowHistoryLayer</a></span></td><td class="taglistodd">履歴レイヤが表示された時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onHideHistoryLayer">onHideHistoryLayer</a></span></td><td class="taglisteven">履歴レイヤが消去された時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onPrimaryLayerResize">onPrimaryLayerResize</a></span></td><td class="taglistodd">プライマリレイヤのサイズが変更された時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onScreenModeChanged">onScreenModeChanged</a></span></td><td class="taglisteven">スクリーンモードが変更された時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onMessageSpeedConfigChanged">onMessageSpeedConfigChanged</a></span></td><td class="taglistodd">メッセージ速度が変更された時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onReadingMessageSpeedConfigChanged">onReadingMessageSpeedConfigChanged</a></span></td><td class="taglisteven">既読メッセージ速度が変更された時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onPlayMemory">onPlayMemory</a></span></td><td class="taglistodd">回想が再生された時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onEndMemory">onEndMemory</a></span></td><td class="taglisteven">回想の再生が終了した時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onAskStartConfirm">onAskStartConfirm</a></span></td><td class="taglistodd">最初に戻る確認する設定が変更された時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onAskRecordConfirm">onAskRecordConfirm</a></span></td><td class="taglisteven">一つ前に戻る確認する設定が変更された時のイベント</td></tr>
<tr><td class="taglistodd"><span class="taglistlink"><a class="jump" href="#onAskCloseConfirm">onAskCloseConfirm</a></span></td><td class="taglistodd">終了確認する設定が変更された時のイベント</td></tr>
<tr><td class="taglisteven"><span class="taglistlink"><a class="jump" href="#onAskSaveConfirm">onAskSaveConfirm</a></span></td><td class="taglisteven">セーブデータ上書き確認する設定が変更された時のイベント</td></tr>
</tbody></table>
</div></div>

<h1><a name="onConductorCall" id="onConductorCall" class="targanchor"><span class="b">onConductorCall(elm)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onConductorCall"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">elm</td><td class="tagattribname">タグに渡された引数が辞書配列形式で渡されます。<br />
tagname : 'call'<br />
ignore : trueまたはfalseを指定します。trueを指定するとタグは無視されます。</td></tr>
</tbody></table>
<div class="tagremarks">callタグが実行された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onConductorJump" id="onConductorJump" class="targanchor"><span class="b">onConductorJump(elm)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onConductorJump"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">elm</td><td class="tagattribname">タグに渡された引数が辞書配列形式で渡されます。<br />
tagname : 'jump'<br />
ignore : trueまたはfalseを指定します。trueを指定するとタグは無視されます。</td></tr>
</tbody></table>
<div class="tagremarks">jumpタグが実行された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onConductorReturn" id="onConductorReturn" class="targanchor"><span class="b">onConductorReturn(elm)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onConductorReturn"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">elm</td><td class="tagattribname">タグに渡された引数が辞書配列形式で渡されます。<br />
tagname : 'return'<br />
ignore : trueまたはfalseを指定します。trueを指定するとタグは無視されます。</td></tr>
</tbody></table>
<div class="tagremarks">returnタグが実行された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onConductorScenarioLoad" id="onConductorScenarioLoad" class="targanchor"><span class="b">onConductorScenarioLoad(storage)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onConductorScenarioLoad"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">storage</td><td class="tagattribname">読み込まれるシナリオストレージ名。</td></tr>
</tbody></table>
<div class="tagremarks">シナリオが読み込まれる前に呼び出されます。<br /></div>
</div></div>

<h1><a name="onConductorScenarioLoaded" id="onConductorScenarioLoaded" class="targanchor"><span class="b">onConductorScenarioLoaded(storage)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onConductorScenarioLoaded"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">storage</td><td class="tagattribname">読み込まれたシナリオストレージ名。</td></tr>
</tbody></table>
<div class="tagremarks">シナリオが読み込まれた後に呼び出されます。<br /></div>
</div></div>

<h1><a name="onConductorLabel" id="onConductorLabel" class="targanchor"><span class="b">onConductorLabel(label, pagename, firstLabelProcessed)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onConductorLabel"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">label</td><td class="tagattribname">通過したラベル名。<td /></tr>
<tr><td class="tagattribalias">pagename</td><td class="tagattribname">通過したラベルのページ名。</td></tr>
<tr><td class="tagattribalias">firstLabelProcessed</td><td class="tagattribname">最初のセーブ可能ラベルを通過している場合はtrueが渡される。<td /></tr>
</tbody></table>
<div class="tagremarks">ラベル通過時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onSoundMasterVolumeChanged" id="onSoundMasterVolumeChanged" class="targanchor"><span class="b">onSoundMasterVolumeChanged(newVol, oldVol)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onSoundMasterVolumeChanged"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">newVol</td><td class="tagattribname">新しく設定されたマスターボリューム値<td /></tr>
<tr><td class="tagattribalias">oldVol</td><td class="tagattribname">元のマスターボリューム値。</td></tr>
</tbody></table>
<div class="tagremarks">サウンドのマスターボリュームが変更された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onWindowLeftClick" id="onWindowLeftClick" class="targanchor"><span class="b">onWindowLeftClick(x, y, shift)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onWindowLeftClick"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">x</td><td class="tagattribname">マウスカーソル位置<td /></tr>
<tr><td class="tagattribalias">y</td><td class="tagattribname">マウスカーソル位置</td></tr>
<tr><td class="tagattribalias">shift</td><td class="tagattribname">同時に押されていたキー。</td></tr>
</tbody></table>
<div class="tagremarks">ウインドウが左クリックされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onWindowRightClick" id="onWindowRightClick" class="targanchor"><span class="b">onWindowRightClick(x, y, shift)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onWindowRightClick"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">x</td><td class="tagattribname">マウスカーソル位置<td /></tr>
<tr><td class="tagattribalias">y</td><td class="tagattribname">マウスカーソル位置</td></tr>
<tr><td class="tagattribalias">shift</td><td class="tagattribname">同時に押されていたキー。</td></tr>
</tbody></table>
<div class="tagremarks">ウインドウが右クリックされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onWindowMiddleClick" id="onWindowMiddleClick" class="targanchor"><span class="b">onWindowMiddleClick(x, y, shift)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onWindowMiddleClick"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">x</td><td class="tagattribname">マウスカーソル位置<td /></tr>
<tr><td class="tagattribalias">y</td><td class="tagattribname">マウスカーソル位置</td></tr>
<tr><td class="tagattribalias">shift</td><td class="tagattribname">同時に押されていたキー。</td></tr>
</tbody></table>
<div class="tagremarks">ウインドウが中クリックされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onWindowMouseWheel" id="onWindowMouseWheel" class="targanchor"><span class="b">onWindowMouseWheel(shift, delta, x, y)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onWindowMouseWheel"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">shift</td><td class="tagattribname">同時に押されていたキー。</td></tr>
<tr><td class="tagattribalias">delta</td><td class="tagattribname">上方向に回された場合は正、下方向に回された場合は負の値になります。</td></tr>
<tr><td class="tagattribalias">x</td><td class="tagattribname">マウスカーソル位置<td /></tr>
<tr><td class="tagattribalias">y</td><td class="tagattribname">マウスカーソル位置</td></tr>
</tbody></table>
<div class="tagremarks">ホイールが回転された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onWindowKeyDown" id="onWindowKeyDown" class="targanchor"><span class="b">onWindowKeyDown(key, shift)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onWindowKeyDown"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">key</td><td class="tagattribname">キーダウンした仮想キーコード。</td></tr>
<tr><td class="tagattribalias">shift</td><td class="tagattribname">同時に押されていたキー。</td></tr>
</tbody></table>
<div class="tagremarks">キーボードのキーが押された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onWindowKeyUp" id="onWindowKeyUp" class="targanchor"><span class="b">onWindowKeyUp(key, shift)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onWindowKeyUp"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">key</td><td class="tagattribname">キーアップした仮想キーコード。</td></tr>
<tr><td class="tagattribalias">shift</td><td class="tagattribname">同時に押されていたキー。</td></tr>
</tbody></table>
<div class="tagremarks">キーボードのキーが離された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onWindowClose" id="onWindowClose" class="targanchor"><span class="b">onWindowClose(window)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onWindowClose"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">window</td><td class="tagattribname">ウインドウオブジェクト。</td></tr>
</tbody></table>
<div class="tagremarks">ウインドウが閉じる前に呼び出されます。<br /></div>
</div></div>

<h1><a name="onSaveStartAnchor" id="onSaveStartAnchor" class="targanchor"><span class="b">onSaveStartAnchor(userFlags, core)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onSaveStartAnchor"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">セーブ時のユーザーフラグが渡されます。</td></tr>
<tr><td class="tagattribalias">core</td><td class="tagattribname">セーブ時のコアフラグが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">スタート位置の記録時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onLoadStartAnchor" id="onLoadStartAnchor" class="targanchor"><span class="b">onLoadStartAnchor(userFlags, core)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onLoadStartAnchor"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">ロード時のユーザーフラグが渡されます。</td></tr>
<tr><td class="tagattribalias">core</td><td class="tagattribname">ロード時のコアフラグが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">スタート位置のロード時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onPushRecordAnchor" id="onPushRecordAnchor" class="targanchor"><span class="b">onPushRecordAnchor(userFlags, core)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onPushRecordAnchor"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">レコード保存時のユーザーフラグが渡されます。</td></tr>
<tr><td class="tagattribalias">core</td><td class="tagattribname">レコード保存時のコアフラグが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">レコード位置の保存時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onPopRecordAnchor" id="onPopRecordAnchor" class="targanchor"><span class="b">onPopRecordAnchor(userFlags, core)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onPopRecordAnchor"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">レコード復帰時のユーザーフラグが渡されます。</td></tr>
<tr><td class="tagattribalias">core</td><td class="tagattribname">レコード復帰時のコアフラグが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">レコード位置の復帰時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onRemoveStartAnchor" id="onRemoveStartAnchor" class="targanchor"><span class="b">onRemoveStartAnchor()</span></h1>
<div class="para"><div>
<div class="tagremarks">記録されたスタート位置を削除した時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onSaveSystemVariables" id="onSaveSystemVariables" class="targanchor"><span class="b">onSaveSystemVariables(userFlags)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onSaveSystemVariables"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">セーブ時のユーザーフラグが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">システム変数がセーブされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onLoadSystemVariables" id="onLoadSystemVariables" class="targanchor"><span class="b">onLoadSystemVariables(userFlags)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onLoadSystemVariables"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">ロード時のユーザーフラグが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">システム変数がロードされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onSave" id="onSave" class="targanchor"><span class="b">onSave(userFlags, coreFlags)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onSave"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">セーブ時のユーザーフラグが渡されます。</td></tr>
<tr><td class="tagattribalias">coreFlags</td><td class="tagattribname">セーブ時のコアフラグが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">セーブされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onLoad" id="onLoad" class="targanchor"><span class="b">onLoad(userFlags, coreFlags)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onLoad"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">ロード時のユーザーフラグが渡されます。</td></tr>
<tr><td class="tagattribalias">coreFlags</td><td class="tagattribname">ロード時のコアフラグが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">ロードされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onCopyBookmark" id="onCopyBookmark" class="targanchor"><span class="b">onCopyBookmark(userFlags, coreFlags, src, dest)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onCopyBookmark"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">userFlags</td><td class="tagattribname">セーブ時のユーザーフラグが渡されます。</td></tr>
<tr><td class="tagattribalias">coreFlags</td><td class="tagattribname">セーブ時のコアフラグが渡されます。</td></tr>
<tr><td class="tagattribalias">src</td><td class="tagattribname">コピー元のセーブデータ番号が渡されます。</td></tr>
<tr><td class="tagattribalias">dest</td><td class="tagattribname">コピー先のセーブデータ番号が渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">セーブデータがコピーされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onEraseBookmark" id="onEraseBookmark" class="targanchor"><span class="b">onEraseBookmark(number)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onEraseBookmark"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">number</td><td class="tagattribname">削除されたセーブデータ番号が渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">セーブデータが削除された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onShowMessageLayer" id="onShowMessageLayer" class="targanchor"><span class="b">onShowMessageLayer()</span></h1>
<div class="tagremarks">メッセージレイヤが表示された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onHideMessageLayer" id="onHideMessageLayer" class="targanchor"><span class="b">onHideMessageLayer()</span></h1>
<div class="tagremarks">メッセージレイヤが消去された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onHideMessageLayerByUser" id="onHideMessageLayerByUser" class="targanchor"><span class="b">onHideMessageLayerByUser()</span></h1>
<div class="tagremarks">メッセージレイヤが一時消去された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onShowMessageLayerByUser" id="onShowMessageLayerByUser" class="targanchor"><span class="b">onShowMessageLayerByUser()</span></h1>
<div class="tagremarks">メッセージレイヤが一時消去から元にもどされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onSkipModeChanged" id="onSkipModeChanged" class="targanchor"><span class="b">onSkipModeChanged(from, to)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onSkipModeChanged"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">from</td><td class="tagattribname">遷移元のスキップモードが渡されます。</td></tr>
<tr><td class="tagattribalias">to</td><td class="tagattribname">遷移先のスキップモードが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">スキップモードが変更された時に呼び出されます。<br />
スキップモードの値は以下の通りです。<br />
modMessage.smNotSkip(スキップしない)<br />
modMessage.smNextWait(次のクリック待ちまでスキップ)<br />
modMessage.smPageEnd(ページ待ちまでスキップ)<br />
modMessage.smNextStop(次の停止までスキップ)<br />
modMessage.smNotRead(次の未読部分までスキップ)<br />
modMessage.smCancel(キャンセルされるまでスキップ)<br />
</div>
</div></div>

<h1><a name="onCancelAutoMode" id="onCancelAutoMode" class="targanchor"><span class="b">onCancelAutoMode()</span></h1>
<div class="tagremarks">オートモードがキャンセルされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onEnterAutoMode" id="onEnterAutoMode" class="targanchor"><span class="b">onEnterAutoMode()</span></h1>
<div class="tagremarks">オートモードになった時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onShowHistoryLayer" id="onShowHistoryLayer" class="targanchor"><span class="b">onShowHistoryLayer()</span></h1>
<div class="tagremarks">履歴レイヤが表示された時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onHideHistoryLayer" id="onHideHistoryLayer" class="targanchor"><span class="b">onHideHistoryLayer()</span></h1>
<div class="tagremarks">履歴レイヤが非表示にされた時に呼び出されます。<br /></div>
</div></div>

<h1><a name="onPrimaryLayerResize" id="onPrimaryLayerResize" class="targanchor"><span class="b">onPrimaryLayerResize(left, top, width, height)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onPrimaryLayerResize"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">left</td><td class="tagattribname">プライマリレイヤの位置が渡されます。</td></tr>
<tr><td class="tagattribalias">top</td><td class="tagattribname">プライマリレイヤの位置が渡されます。</td></tr>
<tr><td class="tagattribalias">width</td><td class="tagattribname">プライマリレイヤのサイズが渡されます。</td></tr>
<tr><td class="tagattribalias">height</td><td class="tagattribname">プライマリレイヤのサイズが渡されます。</td></tr>
</tbody></table>
<div class="tagremarks">プライマリレイヤのサイズが変更された時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onScreenModeChanged" id="onScreenModeChanged" class="targanchor"><span class="b">onScreenModeChanged(fullScreened)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onScreenModeChanged"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">fullScreened</td><td class="tagattribname">trueならフルスクリーン化されます。</td></tr>
</tbody></table>
<div class="tagremarks">スクリーンモードが変更された時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onMessageSpeedConfigChanged" id="onMessageSpeedConfigChanged" class="targanchor"><span class="b">onMessageSpeedConfigChanged(config)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onMessageSpeedConfigChanged"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">config</td><td class="tagattribname">メッセージ速度設定が渡されます。<br />
config.noWait : ノーウェイト時の文字表示速度。<br />
config.high : 早い時の文字表示速度。<br />
config.normal : 通常時の文字表示速度。<br />
config.low : 遅い時の文字表示速度。<br /></td></tr>
</tbody></table>
<div class="tagremarks">メッセージ速度設定が変更された時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onReadingMessageSpeedConfigChanged" id="onReadingMessageSpeedConfigChanged" class="targanchor"><span class="b">onReadingMessageSpeedConfigChanged(config)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onReadingMessageSpeedConfigChanged"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">config</td><td class="tagattribname">既読メッセージ速度設定が渡されます。<br />
config.noWait : ノーウェイト時の文字表示速度。<br />
config.high : 早い時の文字表示速度。<br />
config.normal : 通常時の文字表示速度。<br />
config.low : 遅い時の文字表示速度。<br /></td></tr>
</tbody></table>
<div class="tagremarks">既読メッセージ速度設定が変更された時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onPlayMemory" id="onPlayMemory" class="targanchor"><span class="b">onPlayMemory(storage, label)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onPlayMemory"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">storage</td><td class="tagattribname">再生される回想のシナリオストレージ名が渡されます。<br />
<tr><td class="tagattribalias">label</td><td class="tagattribname">再生される回想のシナリオラベル名が渡されます。<br />
</tbody></table>
<div class="tagremarks">回想の再生が開始された時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onEndMemory" id="onEndMemory" class="targanchor"><span class="b">onEndMemory()</span></h1>
<div class="tagremarks">回想の再生が終了した時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onAskStartConfirm" id="onAskStartConfirm" class="targanchor"><span class="b">onAskStartConfirm(confirm)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onAskStartConfirm"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">confirm</td><td class="tagattribname">trueならば確認ダイアログを表示します。<br />
</tbody></table>
<div class="tagremarks">確認するしないの設定が変更された時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onAskRecordConfirm" id="onAskRecordConfirm" class="targanchor"><span class="b">onAskRecordConfirm(confirm)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onAskRecordConfirm"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">confirm</td><td class="tagattribname">trueならば確認ダイアログを表示します。<br />
</tbody></table>
<div class="tagremarks">確認するしないの設定が変更された時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onAskCloseConfirm" id="onAskCloseConfirm" class="targanchor"><span class="b">onAskCloseConfirm(confirm)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onAskCloseConfirm"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">confirm</td><td class="tagattribname">trueならば確認ダイアログを表示します。<br />
</tbody></table>
<div class="tagremarks">確認するしないの設定が変更された時に呼び出されます。<br />
</div>
</div></div>

<h1><a name="onAskSaveConfirm" id="onAskSaveConfirm" class="targanchor"><span class="b">onAskSaveConfirm(confirm)</span></h1>
<div class="para"><div><table class="tagparams" frame="box" rules="all" summary="onAskSaveConfirm"><thead><tr><td>引数</td><td>説明</td></tr></thead><tbody>
<tr><td class="tagattribalias">confirm</td><td class="tagattribname">trueならば確認ダイアログを表示します。<br />
</tbody></table>
<div class="tagremarks">確認するしないの設定が変更された時に呼び出されます。<br />
</div>
</div></div>

	<script type="text/javascript" charset="Shift_JIS" src="documentid.js" ></script>
	<script type="text/javascript" charset="Shift_JIS" src="postcontent.js" ></script>
</body>
</html>
